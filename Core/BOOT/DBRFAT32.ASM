%include "SYSINF.INC"

org BOOT_ORG
bits 16

CPU 586	;֤

%include "BPBFAT32.INC"
<<<<<<< HEAD

%define FATBuffer	(DBR_NEWPOS + 1024)	;FATַ, һ(ǰ1024ֽ: һ512ֽDBR, 512ֽBSSݺջ)
%define rootEntries	2000h				;Ŀ¼ַ, һ(СС5KľͲḲFATBuffer)

struc PARAMS							;
	.IVRTable		resd	0x100			;ж256ÿ4ֽ
	.BIOSData		resb	0x200			;BIOSռ512ֽ
	.DBR:								;ǵDBR
	.CurFATSect		resd	1
	.DAP:								;Ӳݴ
	.DAPSize		resb	1			;ݰС
	.DAPReserved	resb	1			;ֽ			
	.DAPBlocks		resw	1			;
	.DAPBufferPtr	resd	1			;ָ
	.DAPLBA			resq	1			;ݰָĿַ
endstruc

=======
>>>>>>> parent of c65bc61... 引导FAT32分区上的DBR完成了, 可在实体机中使用
Start:

%define	MOVER_SIZE		(DBR_Continue-$$)

;Ȱѱ0:BOOT_ORGת0:DBR_NEWPOS
cli
xor ax,ax						;
mov es,ax
mov ss,ax
mov ds,ax
mov sp,BOOT_ORG					;úöջ
mov si,BOOT_ORG					;׼ѱתƵλڴ
mov di,DBR_NEWPOS
mov cx,DBR_SIZE>>1
rep movsw						;ͨٿĴ߿ٶ
sti
jmp 0x0000:DBR_Continue

DBR_Continue:					;˴DBR_Continueʼ
<<<<<<< HEAD
mov ah,0x41
mov bx,


LOADER_SYS		db	LODR_FILENAME		;LOADER.SYS8.3ʽ

times DBR_SIZE-($-Start)-2	db 0
dw	FLAG_BOOTALBE

FSInfo:








times DBR_SIZE-($-FSInfo)-2	db 0
dw	FLAG_BOOTALBE

SecContinue:




times DBR_SIZE-($-SecContinue)-2	db 0
dw	FLAG_BOOTALBE
=======

times DBR_SIZE-($-$$)-2	nop
dw	FLAG_BOOTALBE
>>>>>>> parent of c65bc61... 引导FAT32分区上的DBR完成了, 可在实体机中使用
